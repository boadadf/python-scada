{
  "dp_types": {
    "LEVEL":      { "type": "float", "min": 0, "max": 100, "default": 0.0 },
    "STATUS":     { "type": "enum", "values": ["ON", "OFF"], "default": "OFF" },
    "BOOL":       { "type": "bool", "default": false },
    "POSITION":   { "type": "int", "min": 0, "max": 100, "default": 0 },
    "PRESSURE":   { "type": "float", "min": 0, "max": 200, "default": 0.0 },
    "TEMPERATURE":{ "type": "float", "min": -40, "max": 150, "default": 20.0 }
  },
  "drivers": [
    {
      "name": "Server1",
      "driver_class": "TestDriver",
      "connection_info": { "server_name": "Server1" },
      "datapoints": [
        { "name": "TANK1_LEVEL", "type": "LEVEL" },
        { "name": "PUMP1_STATUS", "type": "STATUS" },
        { "name": "DOOR1_OPEN", "type": "BOOL" }
      ]
    },
    {
      "name": "Server2",
      "driver_class": "TestDriver",
      "connection_info": { "server_name": "Server2" },
      "datapoints": [
        { "name": "VALVE1_POS", "type": "POSITION" },
        { "name": "PRESSURE", "type": "PRESSURE" },
        { "name": "TEMPERATURE", "type": "TEMPERATURE" }
      ]
    }
  ],
  "rules": [
    {
      "rule_id": "close_valve_if_high",
      "on_condition": "Server2@PRESSURE > 100",
      "on_actions": [
        "send_command('Server2@VALVE1_POS', 0)",
        "raise_alarm()"
      ],
      "off_condition": "Server2@PRESSURE < 80",
      "off_actions": [
        "lower_alarm()"
      ]
    },
    {
      "rule_id": "pump_shutdown_if_low_level",
      "on_condition": "Server1@TANK1_LEVEL < 10",
      "on_actions": [
        "send_command('Server1@PUMP1_STATUS', 'OFF')",
        "raise_alarm()"
      ]
    },
    {
      "rule_id": "door_open_alarm",
      "on_condition": "Server1@DOOR1_OPEN == True",
      "on_actions": [
        "raise_alarm()"
      ]
    },
    {
      "rule_id": "temperature_high_warning",
      "on_condition": "Server2@TEMPERATURE > 80",
      "on_actions": [
        "raise_alarm()"
      ]
    }
  ]
}