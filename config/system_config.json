{
  "dp_types": {
    "LEVEL": {
      "default": 0,
      "max": 100,
      "min": 0,
      "type": "float"
    },
    "OPENED_CLOSED": {
      "default": "CLOSED",
      "type": "enum",
      "values": [
        "OPENED",
        "CLOSED"
      ]
    },
    "OPEN_CLOSE_CMD": {
      "default": "CLOSE",
      "type": "enum",
      "values": [
        "OPEN",
        "CLOSE",
        "TOGGLE"
      ]
    },
    "PRESSURE": {
      "default": 50,
      "max": 200,
      "min": 0,
      "type": "float"
    },
    "START_STOP": {
      "default": "STOPPED",
      "type": "enum",
      "values": [
        "STARTED",
        "STOPPED"
      ]
    },
    "START_STOP_CMD": {
      "default": "STOP",
      "type": "enum",
      "values": [
        "START",
        "STOP",
        "TOGGLE"
      ]
    },
    "TEMPERATURE": {
      "default": 120,
      "max": 150,
      "min": 100,
      "type": "enum"
    },
    "TRAIN_SWITCH": {
      "default": "STRAIGHT",
      "max": 100,
      "min": 0,
      "type": "enum",
      "values": [
        "STRAIGHT",
        "TURN"
      ]
    }
  },
  "drivers": [
    {
      "command_datapoints": [
        {
          "name": "PUMP_CMD",
          "type": "OPEN_CLOSE_CMD"
        },
        {
          "name": "DOOR_CMD",
          "type": "OPEN_CLOSE_CMD"
        },
        {
          "name": "TEST_CMD",
          "type": "START_STOP_CMD"
        }
      ],
      "connection_info": {
        "server_name": "Server1"
      },
      "datapoints": [
        {
          "name": "TANK",
          "type": "LEVEL"
        },
        {
          "name": "PUMP",
          "type": "OPENED_CLOSED"
        },
        {
          "name": "DOOR",
          "type": "OPENED_CLOSED"
        },
        {
          "name": "TEST",
          "type": "START_STOP"
        }
      ],
      "driver_class": "TankTestDriver",
      "name": "Server1"
    },
    {
      "command_datapoints": [
        {
          "name": "VALVE_CMD",
          "type": "OPENED_CLOSED_CMD"
        },
        {
          "name": "HEATER_CMD",
          "type": "OPEN_CLOSE_CMD"
        },
        {
          "name": "TEST_CMD",
          "type": "START_STOP_CMD"
        }
      ],
      "connection_info": {
        "server_name": "Server2"
      },
      "datapoints": [
        {
          "name": "VALVE",
          "type": "OPENED_CLOSED"
        },
        {
          "name": "PRESSURE",
          "type": "PRESSURE"
        },
        {
          "name": "TEMPERATURE",
          "type": "TEMPERATURE"
        },
        {
          "name": "HEATER",
          "type": "OPENED_CLOSED"
        },
        {
          "name": "TEST",
          "type": "START_STOP"
        }
      ],
      "driver_class": "BoilerTestDriver",
      "name": "Server2"
    }
  ],
  "modules": [
    {
      "name": "alarm"
    },
    {
      "name": "command"
    },
    {
      "name": "communication"
    },
    {
      "name": "datapoint"
    },
    {
      "name": "animation"
    },
    {
      "config": {
        "p1": "file",
        "p2": "flow_events.log"
      },
      "name": "tracking"
    }
  ],
  "rules": [
    {
      "off_actions": [
        "lower_alarm()"
      ],
      "off_condition": "Server2@PRESSURE < 80",
      "on_actions": [
        "send_command('Server2@VALVE', 0)",
        "raise_alarm()"
      ],
      "on_condition": "Server2@PRESSURE > 100",
      "rule_id": "close_valve_if_high"
    },
    {
      "on_actions": [
        "send_command('Server1@PUMP_CMD', 'OPEN')",
        "send_command('Server1@DOOR_CMD', 'CLOSE')",
        "raise_alarm()"
      ],
      "on_condition": "float(Server1@TANK) < 10",
      "rule_id": "pump_start_if_low_level"
    },
    {
      "on_actions": [
        "raise_alarm()"
      ],
      "on_condition": "Server1@DOOR == OPENED",
      "rule_id": "door_open_alarm"
    },
    {
      "on_actions": [
        "raise_alarm()"
      ],
      "on_condition": "Server2@TEMPERATURE > 80",
      "rule_id": "temperature_high_warning"
    }
  ]
}