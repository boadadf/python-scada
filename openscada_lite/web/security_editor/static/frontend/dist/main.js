/*! For license information please see main.js.LICENSE.txt */
(self.webpackChunksecurity_editor=self.webpackChunksecurity_editor||[]).push([[792],{115:(n,e,t)=>{"use strict";var r=t(540),o=t(338),i=t(72),a=t.n(i),l=t(825),u=t.n(l),c=t(659),s=t.n(c),d=t(56),f=t.n(d),p=t(159),b=t.n(p),m=t(113),g=t.n(m),y=t(626),h={};function v(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,e)||function(n,e){if(n){if("string"==typeof n)return x(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}h.styleTagTransform=g(),h.setAttributes=f(),h.insert=s().bind(null,"head"),h.domAPI=u(),h.insertStyleElement=b(),a()(y.A,h),y.A&&y.A.locals&&y.A.locals;var w=(0,r.createContext)();function E(n){var e=n.children,t=v((0,r.useState)(function(){return localStorage.getItem("jwt_token")}),2),o=t[0],i=t[1],a=v((0,r.useState)(function(){var n=localStorage.getItem("user_info");return n?JSON.parse(n):null}),2),l=a[0],u=a[1];return r.createElement(w.Provider,{value:{token:o,user:l,login:function(n,e){i(n),u(e),localStorage.setItem("jwt_token",n),localStorage.setItem("user_info",JSON.stringify(e))},logout:function(){i(null),u(null),localStorage.removeItem("jwt_token"),localStorage.removeItem("user_info")},isAuthenticated:!!o}},e)}function S(){return(0,r.useContext)(w)}var k=t(250),O={};function j(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var u=r&&r.prototype instanceof l?r:l,c=Object.create(u.prototype);return A(c,"_invoke",function(t,r,o){var i,l,u,c=0,s=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return i=e,l=0,u=n,f.n=t,a}};function p(t,r){for(l=t,u=r,e=0;!d&&c&&!o&&e<s.length;e++){var o,i=s[e],p=f.p,b=i[2];t>3?(o=b===r)&&(u=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=n):i[0]<=p&&((o=t<2&&p<i[1])?(l=0,f.v=r,f.n=i[1]):p<b&&(o=t<3||i[0]>r||r>b)&&(i[4]=t,i[5]=r,f.n=b,l=0))}if(o||t>1)return a;throw d=!0,r}return function(o,s,b){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,b),l=s,u=b;(e=l<2?n:u)||!d;){i||(l?l<3?(l>1&&(f.n=-1),p(l,u)):f.n=u:f.v=u);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=n}else if((e=(d=f.n<0)?u:t.call(r,f))!==a)break}catch(e){i=n,l=1,u=e}finally{c=1}}return{value:e,done:d}}}(t,o,i),!0),c}var a={};function l(){}function u(){}function c(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(A(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(s);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,c):(n.__proto__=c,A(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return u.prototype=c,A(d,"constructor",c),A(c,"constructor",u),u.displayName="GeneratorFunction",A(c,o,"GeneratorFunction"),A(d),A(d,o,"Generator"),A(d,r,function(){return this}),A(d,"toString",function(){return"[object Generator]"}),(j=function(){return{w:i,m:f}})()}function A(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}A=function(n,e,t,r){function i(e,t){A(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(i("next",0),i("throw",1),i("return",2))},A(n,e,t,r)}function C(n,e,t,r,o,i,a){try{var l=n[i](a),u=l.value}catch(n){return void t(n)}l.done?e(u):Promise.resolve(u).then(r,o)}function P(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,e)||function(n,e){if(n){if("string"==typeof n)return T(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}O.styleTagTransform=g(),O.setAttributes=f(),O.insert=s().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=b(),a()(k.A,O),k.A&&k.A.locals&&k.A.locals;var N=[{href:"/scada",label:"SCADA"},{href:"/security-editor",label:"Security Config"},{href:"/config-editor",label:"System Config"},{href:"/static/README.html",label:"About OSL"}];function I(n){var e,t=n.onLoginSuccess,o=n.loginEndpoint,i=void 0===o?"/security/login":o,a=n.redirectPath,l=void 0===a?"/":a,u=S().login,c=P((0,r.useState)(""),2),s=c[0],d=c[1],f=P((0,r.useState)(""),2),p=f[0],b=f[1],m=P((0,r.useState)(""),2),g=m[0],y=m[1],h=P((0,r.useState)(!1),2),v=h[0],x=h[1],w=(e=window.location.pathname).startsWith("/scada")?N.filter(function(n){return"/scada"!==n.href}):e.startsWith("/security-editor")?N.filter(function(n){return"/security-editor"!==n.href}):e.startsWith("/config-editor")?N.filter(function(n){return"/config-editor"!==n.href}):N,E=function(n){return n.startsWith("/scada")?"SCADA App":n.startsWith("/security-editor")?"Security configuration App":n.startsWith("/config-editor")?"System configuration App":"Open Scada Lite"}(window.location.pathname),k=function(n){return n.startsWith("/scada")?"scada":n.startsWith("/security-editor")?"security_editor":n.startsWith("/config-editor")?"config_editor":"unknown"}(window.location.pathname);function O(){var n;return n=j().m(function n(e){var r,o;return j().w(function(n){for(;;)switch(n.p=n.n){case 0:return e.preventDefault(),y(""),x(!0),n.p=1,n.n=2,fetch("".concat(i,"?app=").concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:p})});case 2:if((r=n.v).ok){n.n=3;break}throw new Error("Login failed");case 3:return n.n=4,r.json();case 4:"ok"===(o=n.v).status?(u(o.data.token,o.data.user),x(!1),t?t():window.location.href=l):(y(o.reason||"Login failed"),x(!1)),n.n=6;break;case 5:n.p=5,n.v,y("Invalid credentials"),x(!1);case 6:return n.a(2)}},n,null,[[1,5]])}),O=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(n){C(i,r,o,a,l,"next",n)}function l(n){C(i,r,o,a,l,"throw",n)}a(void 0)})},O.apply(this,arguments)}return r.createElement("div",{className:"osl-login-bg"},r.createElement("div",{style:{position:"fixed",top:18,right:32,zIndex:100,display:"flex",gap:18,fontSize:15,fontWeight:500}},w.map(function(n){return r.createElement("a",{key:n.href,href:n.href,style:{color:"#333",textDecoration:"none",padding:"2px 10px",borderRadius:4,transition:"background 0.2s",background:"rgba(33,33,33,0.07)"},onMouseOver:function(n){return n.currentTarget.style.background="#eee"},onMouseOut:function(n){return n.currentTarget.style.background="rgba(33,33,33,0.07)"}},n.label)})),r.createElement("div",{className:"osl-login-box",style:{position:"relative"}},r.createElement("form",{className:"osl-login-form",onSubmit:function(n){return O.apply(this,arguments)}},r.createElement("div",{className:"osl-login-title"},"OSL"),r.createElement("div",{className:"osl-login-subtitle"},E),g&&r.createElement("div",{className:"osl-login-error"},g),r.createElement("input",{type:"text",placeholder:"Username",autoFocus:!0,value:s,onChange:function(n){return d(n.target.value)},className:"osl-login-input"}),r.createElement("input",{type:"password",placeholder:"Password",value:p,onChange:function(n){return b(n.target.value)},className:"osl-login-input"}),r.createElement("button",{type:"submit",disabled:v,className:"osl-login-btn"},v?"Signing in...":"Sign in"))))}function _(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function z(n){var e,t,o=n.onLoad,i=n.onSave,a=n.dirty,l=void 0!==a&&a,u=(e=(0,r.useState)(!1),t=2,function(n){if(Array.isArray(n))return n}(e)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(n,e){if(n){if("string"==typeof n)return _(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(n,e):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1],d=(0,r.useRef)(),f=S().logout;return(0,r.useEffect)(function(){function n(n){d.current&&!d.current.contains(n.target)&&s(!1)}return c&&document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}},[c]),r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid #ddd",background:"#f7f7f7",position:"relative"}},r.createElement("div",{style:{fontWeight:"bold",fontSize:18,letterSpacing:1}},"Security Config Editor"),r.createElement("div",{ref:d,style:{position:"relative"}},r.createElement("button",{style:{background:"none",border:"none",fontWeight:"bold",fontSize:16,cursor:"pointer",padding:"4px 12px",color:"#222"},onClick:function(){return s(function(n){return!n})}},"Operations â–¾"),c&&r.createElement("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"1px solid #ccc",borderRadius:4,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",zIndex:10,minWidth:140}},r.createElement("div",{style:{padding:"8px 16px",cursor:"pointer"},onClick:function(){s(!1),o()}},"Load"),r.createElement("div",{style:{padding:"8px 16px",cursor:"pointer"},onClick:function(){s(!1),i()}},"Save"),r.createElement("div",{style:{padding:"8px 16px",cursor:"pointer",color:"#e53935",borderTop:"1px solid #eee"},onClick:function(){s(!1),!l||window.confirm("You have unsaved changes. Are you sure you want to logout?")?(f(),window.location.reload()):s(!1)}},"Logout"))))}function J(n){var e=n.tabs,t=n.active,o=n.onChange;return r.createElement("div",{style:{display:"flex",borderBottom:"1px solid #ddd"}},e.map(function(n){return r.createElement("div",{key:n,onClick:function(){return o(n)},style:{padding:"10px 14px",cursor:"pointer",background:t===n?"#fff":"#f0f0f0",borderTop:"1px solid #ddd",borderLeft:"1px solid #ddd",borderRight:"1px solid #ddd"}},n)}))}function D(n){var e=n.columns,t=n.data,o=n.selectedIndex,i=n.onSelect;return r.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},r.createElement("thead",null,r.createElement("tr",null,e.map(function(n){return r.createElement("th",{key:n,style:{border:"1px solid #ccc",padding:"6px",textAlign:"left"}},n)}))),r.createElement("tbody",null,t.map(function(n,t){return r.createElement("tr",{key:t,onClick:function(){return i(t)},style:{background:o===t?"#e6f7ff":"transparent",cursor:"pointer"}},e.map(function(e){var t;return r.createElement("td",{key:e,style:{border:"1px solid #eee",padding:"6px"}},String(void 0===n[e]?null!==(t=n[e.toLowerCase()])&&void 0!==t?t:"":n[e]))}))})))}var G=t(312);function L(n){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},L(n)}function U(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function W(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?U(Object(t),!0).forEach(function(e){F(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function F(n,e,t){return(e=function(n){var e=function(n){if("object"!=L(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=L(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==L(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function M(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,e)||B(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(n,e){if(n){if("string"==typeof n)return $(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(n,e):void 0}}function $(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}var R=[{value:"scada",label:"SCADA"},{value:"security_editor",label:"Security Editor"},{value:"config_editor",label:"System Config Editor"}];function H(n){var e=n.config,t=n.setConfig,o=M((0,r.useState)(null),2),i=o[0],a=o[1],l=M((0,r.useState)(""),2),u=l[0],c=l[1],s=e.users||[],d=e.groups||[];return(0,r.useEffect)(function(){c("")},[i]),r.createElement("div",{style:{padding:12}},r.createElement("div",{style:{display:"flex",gap:8,marginBottom:8}},r.createElement("div",{style:{flex:1}},r.createElement(D,{columns:["username","groups"],data:s.map(function(n){return W(W({},n),{},{groups:(n.groups||[]).join(", ")})}),selectedIndex:i,onSelect:a})),r.createElement("div",{style:{width:120,display:"flex",flexDirection:"column",gap:6}},r.createElement("button",{onClick:function(){var n=prompt("Username:");if(n){var r=prompt("Password:");if(r){var o=(0,G.sha256)(r),i=JSON.parse(JSON.stringify(e));i.users.push({username:n,password_hash:o,groups:[],allowed_apps:[]}),t(i),a(i.users.length-1)}}}},"+"),r.createElement("button",{onClick:function(){if(null!=i&&window.confirm("Delete selected user?")){var n=JSON.parse(JSON.stringify(e));n.users.splice(i,1),t(n),a(null)}}},"-"))),null!=i&&s[i]&&r.createElement("div",{style:{marginTop:12}},r.createElement("h3",null,"Edit User"),r.createElement("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8}},r.createElement("label",null,"Username:"),r.createElement("input",{value:s[i].username,onChange:function(n){return r=n.target.value,(o=JSON.parse(JSON.stringify(e))).users[i].username=r,void t(o);var r,o}}),r.createElement("label",null,"Change Password:"),r.createElement("div",{style:{display:"flex",gap:8}},r.createElement("input",{type:"password",value:u,onChange:function(n){return c(n.target.value)},placeholder:"New password"}),r.createElement("button",{type:"button",onClick:function(){if(u){var n=JSON.parse(JSON.stringify(e));n.users[i].password_hash=(0,G.sha256)(u),t(n),c(""),alert("Password updated!")}}},"Set")),r.createElement("label",null,"Group:"),r.createElement("table",{style:{width:"100%",background:"#fafaff",borderCollapse:"collapse"}},r.createElement("tbody",null,d.map(function(n){return r.createElement("tr",{key:n.name},r.createElement("td",null,r.createElement("input",{type:"radio",name:"user-group",checked:s[i].groups&&s[i].groups[0]===n.name,onChange:function(){return r=n.name,(o=JSON.parse(JSON.stringify(e))).users[i].groups=[r],void t(o);var r,o}})),r.createElement("td",null,n.name))}))),r.createElement("label",null,"Allowed Apps:"),r.createElement("table",{style:{width:"100%",background:"#fafaff",borderCollapse:"collapse"}},r.createElement("tbody",null,R.map(function(n){return r.createElement("tr",{key:n.value},r.createElement("td",null,r.createElement("input",{type:"checkbox",checked:s[i].allowed_apps&&s[i].allowed_apps.includes(n.value),onChange:function(){return o=n.value,(l=(a=JSON.parse(JSON.stringify(e))).users[i].allowed_apps||[]).includes(o)?a.users[i].allowed_apps=l.filter(function(n){return n!==o}):a.users[i].allowed_apps=[].concat(function(n){if(Array.isArray(n))return $(n)}(r=l)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(r)||B(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]),void t(a);var r,o,a,l}})),r.createElement("td",null,n.label))}))))))}function Y(n){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Y(n)}function q(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function K(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?q(Object(t),!0).forEach(function(e){Q(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function Q(n,e,t){return(e=function(n){var e=function(n){if("object"!=Y(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=Y(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==Y(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,e)||function(n,e){if(n){if("string"==typeof n)return X(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Z(n){var e=n.config,t=n.setConfig,o=V((0,r.useState)(null),2),i=o[0],a=o[1],l=V((0,r.useState)([]),2),u=l[0],c=(l[1],e.groups||[]);return(0,r.useEffect)(function(){null!=i&&i>=c.length&&a(null)},[c.length]),r.createElement("div",{style:{padding:12}},r.createElement("div",{style:{display:"flex",gap:8,marginBottom:8}},r.createElement("div",{style:{flex:1}},r.createElement(D,{columns:["name","permissions"],data:c.map(function(n){return K(K({},n),{},{permissions:(n.permissions||[]).join(", ")})}),selectedIndex:i,onSelect:a})),r.createElement("div",{style:{width:120,display:"flex",flexDirection:"column",gap:6}},r.createElement("button",{onClick:function(){var n=prompt("Group name:");if(n){var r=JSON.parse(JSON.stringify(e));r.groups.push({name:n,permissions:[]}),t(r),a(r.groups.length-1)}}},"+"),r.createElement("button",{onClick:function(){if(null!=i&&window.confirm("Delete selected group?")){var n=JSON.parse(JSON.stringify(e));n.groups.splice(i,1),t(n),a(null)}}},"-"))),null!=i&&c[i]&&r.createElement("div",{style:{marginTop:12}},r.createElement("h3",null,"Edit Group"),r.createElement("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,marginBottom:16}},r.createElement("label",null,"Name:"),r.createElement("input",{value:c[i].name,onChange:function(n){return r=n.target.value,(o=JSON.parse(JSON.stringify(e))).groups[i].name=r,void t(o);var r,o}})),r.createElement("h4",null,"Allowed Endpoints"),r.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"}},"Endpoint"),r.createElement("th",{style:{textAlign:"center",borderBottom:"1px solid #ccc"}},"Allowed"))),r.createElement("tbody",null,u.map(function(n){var o;return r.createElement("tr",{key:n},r.createElement("td",{style:{padding:"4px 8px"}},n),r.createElement("td",{style:{textAlign:"center"}},r.createElement("input",{type:"checkbox",checked:null===(o=c[i].permissions)||void 0===o?void 0:o.includes(n),onChange:function(){return function(n){var r=JSON.parse(JSON.stringify(e)),o=r.groups[i];o.permissions||(o.permissions=[]),o.permissions.includes(n)?o.permissions=o.permissions.filter(function(e){return e!==n}):o.permissions.push(n),t(r)}(n)}})))})))))}function nn(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var u=r&&r.prototype instanceof l?r:l,c=Object.create(u.prototype);return en(c,"_invoke",function(t,r,o){var i,l,u,c=0,s=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return i=e,l=0,u=n,f.n=t,a}};function p(t,r){for(l=t,u=r,e=0;!d&&c&&!o&&e<s.length;e++){var o,i=s[e],p=f.p,b=i[2];t>3?(o=b===r)&&(u=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=n):i[0]<=p&&((o=t<2&&p<i[1])?(l=0,f.v=r,f.n=i[1]):p<b&&(o=t<3||i[0]>r||r>b)&&(i[4]=t,i[5]=r,f.n=b,l=0))}if(o||t>1)return a;throw d=!0,r}return function(o,s,b){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,b),l=s,u=b;(e=l<2?n:u)||!d;){i||(l?l<3?(l>1&&(f.n=-1),p(l,u)):f.n=u:f.v=u);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=n}else if((e=(d=f.n<0)?u:t.call(r,f))!==a)break}catch(e){i=n,l=1,u=e}finally{c=1}}return{value:e,done:d}}}(t,o,i),!0),c}var a={};function l(){}function u(){}function c(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(en(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(s);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,c):(n.__proto__=c,en(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return u.prototype=c,en(d,"constructor",c),en(c,"constructor",u),u.displayName="GeneratorFunction",en(c,o,"GeneratorFunction"),en(d),en(d,o,"Generator"),en(d,r,function(){return this}),en(d,"toString",function(){return"[object Generator]"}),(nn=function(){return{w:i,m:f}})()}function en(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}en=function(n,e,t,r){function i(e,t){en(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(i("next",0),i("throw",1),i("return",2))},en(n,e,t,r)}function tn(n,e,t,r,o,i,a){try{var l=n[i](a),u=l.value}catch(n){return void t(n)}l.done?e(u):Promise.resolve(u).then(r,o)}function rn(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(n){tn(i,r,o,a,l,"next",n)}function l(n){tn(i,r,o,a,l,"throw",n)}a(void 0)})}}function on(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(n){c=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,e)||function(n,e){if(n){if("string"==typeof n)return an(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?an(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}var ln={users:[],groups:[]};function un(){var n=on((0,r.useState)(ln),2),e=n[0],t=n[1],o=on((0,r.useState)("Users"),2),i=o[0],a=o[1],l=on((0,r.useState)(!1),2),u=l[0],c=l[1];function s(n){return d.apply(this,arguments)}function d(){return(d=rn(nn().m(function n(e){var r,o,i,a,l;return nn().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,fetch("/security-editor/api/config",{signal:e});case 1:if((r=n.v).ok){n.n=3;break}return i=Error,n.n=2,r.text();case 2:throw a=n.v,new i(a);case 3:return n.n=4,r.json();case 4:o=n.v,t(o),c(!1),n.n=7;break;case 5:if(n.p=5,"AbortError"!==(l=n.v).name&&"TypeError"!==l.name){n.n=6;break}return n.a(2);case 6:alert("Failed to load config: "+l.message);case 7:return n.a(2)}},n,null,[[0,5]])}))).apply(this,arguments)}function f(){return(f=rn(nn().m(function n(){var t,r,o,i;return nn().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,fetch("/security-editor/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 1:if((t=n.v).ok){n.n=3;break}return r=Error,n.n=2,t.text();case 2:throw o=n.v,new r(o);case 3:alert("Saved"),c(!1),n.n=5;break;case 4:n.p=4,i=n.v,alert("Failed to save: "+i.message);case 5:return n.a(2)}},n,null,[[0,4]])}))).apply(this,arguments)}return(0,r.useEffect)(function(){var n=new AbortController;return s(n.signal),function(){return n.abort()}},[]),r.createElement("div",{style:{fontFamily:"Arial, sans-serif",height:"100vh",display:"flex",flexDirection:"column"}},r.createElement(z,{onLoad:s,onSave:function(){return f.apply(this,arguments)},dirty:u}),r.createElement("div",{style:{padding:8}},r.createElement(J,{tabs:["Users","Groups"],active:i,onChange:a}),r.createElement("div",{style:{border:"1px solid #ddd",padding:8,background:"#fff",flex:1,overflow:"auto"}},"Users"===i&&r.createElement(H,{config:e,setConfig:function(n){t(n),c(!0)}}),"Groups"===i&&r.createElement(Z,{config:e,setConfig:function(n){t(n),c(!0)}}))),r.createElement("div",{style:{padding:8,borderTop:"1px solid #ddd",background:"#fafafa"}},r.createElement("span",null,u?"* Unsaved changes":"All changes saved")))}function cn(){return r.createElement(E,null,r.createElement(sn,null,r.createElement(un,null)))}function sn(n){var e=n.children,t=S(),o=t.isAuthenticated;return t.loading?null:o?e:r.createElement(I,{redirectPath:"/security-editor/"})}(0,o.H)(document.getElementById("root")).render(r.createElement(cn,null))},250:(n,e,t)=>{"use strict";t.d(e,{A:()=>l});var r=t(601),o=t.n(r),i=t(314),a=t.n(i)()(o());a.push([n.id,"body, html, .osl-login-bg {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.osl-login-bg {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #2196f3 0%, #21cbf3 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.osl-login-form {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.10);\n  padding: 36px 32px;\n  min-width: 320px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.osl-login-title {\n  font-size: 32px;\n  font-weight: 700;\n  color: #2196f3;\n  margin-bottom: 8px;\n  letter-spacing: 1px;\n}\n.osl-login-subtitle {\n  font-size: 16px;\n  color: #555;\n  margin-bottom: 24px;\n  letter-spacing: 1px;\n}\n.osl-login-error {\n  color: #e53935;\n  margin-bottom: 12px;\n}\n.osl-login-input {\n  margin-bottom: 12px;\n  padding: 10px 14px;\n  border-radius: 6px;\n  border: 1px solid #bbb;\n  width: 100%;\n  font-size: 16px;\n  box-sizing: border-box;\n  min-width: 220px;\n}\n.osl-login-btn {\n  background: #2196f3;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 0;\n  width: 100%;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  box-shadow: 0 2px 8px rgba(33,150,243,0.10);\n  transition: background 0.2s;\n}\n.osl-login-btn:disabled {\n  background: #90caf9;\n  cursor: not-allowed;\n}",""]);const l=a},394:()=>{},626:(n,e,t)=>{"use strict";t.d(e,{A:()=>l});var r=t(601),o=t.n(r),i=t(314),a=t.n(i)()(o());a.push([n.id,'body {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background: #f7f7fa;\n}\n\n.tabs {\n    display: flex;\n    border-bottom: 2px solid #888;\n    background: #e9e9f3;\n    padding: 0.5em 2em 0 2em;\n}\n\n.tab-btn {\n    padding: 0.7em 2em;\n    cursor: pointer;\n    border: none;\n    background: #e9e9f3;\n    margin-right: 2px;\n    border-radius: 8px 8px 0 0;\n    font-size: 1.1em;\n    color: #444;\n    transition: background 0.2s;\n}\n\n.tab-btn.active {\n    background: #fff;\n    border-bottom: 2px solid #fff;\n    color: #222;\n    font-weight: bold;\n}\n\n.tab-content {\n    display: none;\n    background: #fff;\n    padding: 0;\n}\n.tab-content.active {\n    display: block;\n}\n\niframe {\n    width: 100%;\n    height: calc(100vh - 70px);\n    border: none;\n    background: #fff;\n}\n\nh2, h1 {\n    margin-top: 1em;\n    margin-bottom: 1em;\n    color: #333;\n}\n\n/* Make all main tables fill the browser width */\ntable,\n#datapoints-table,\n#commands-table,\n#tracking-table {\n    width: 100%;\n    border-collapse: collapse;\n    background: #fff;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.04);\n    margin-bottom: 1em;\n    font-size: 1em;\n    table-layout: fixed; /* keeps columns consistent */\n}\n\n.table-container {\n    width: 100%;\n    overflow-x: auto;\n}\n\ntr {\n    width: 100vw !important;\n    display: table-row;\n}\n\n/* Ensure table cells stretch and wrap nicely */\nth, td {\n    border: 1px solid #d0d0e0;\n    padding: 0.7em;\n    text-align: left;\n    color: #444;\n    overflow-wrap: break-word;\n    width: auto;\n    min-width: 0;\n    max-width: none;\n    box-sizing: border-box;\n}\n\nthead {\n    background: #e9e9f3;\n}\n\ntr:nth-child(even) {\n    background: #f3f3fa;\n}\n\ntr:hover {\n    background: #e0e0f7;\n}\n\nbutton {\n    padding: 0.3em 1em;\n    border-radius: 5px;\n    border: none;\n    background: #5c7cfa;\n    color: #fff;\n    font-weight: bold;\n    cursor: pointer;\n    transition: background 0.2s;\n}\n\nbutton:disabled {\n    background: #ccc;\n    color: #888;\n    cursor: not-allowed;\n}\n\nbutton:hover:not(:disabled) {\n    background: #3b5bdb;\n}\n\ninput[type="text"] {\n    width: 90px;\n    padding: 0.3em;\n    border-radius: 4px;\n    border: 1px solid #bbb;\n    background: #f7f7fa;\n    font-size: 1em;\n}\n\n.driver-list {\n    max-width: 900px;\n    margin: 2em auto;\n    background: #fff;\n    border-radius: 12px;\n    box-shadow: 0 4px 24px rgba(60,80,180,0.08);\n    padding: 2em;\n    width: 100%;\n}\n\n.driver-row {\n    display: flex;\n    align-items: center;\n    padding: 1em 0.5em;\n    border-bottom: 1px solid #e0e0f7;\n    transition: background 0.2s;\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.driver-row:last-child {\n    border-bottom: none;\n}\n\n.driver-row:hover {\n    background: #f3f3fa;\n}\n\n.status-indicator {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    margin-right: 1em;\n    border: 2px solid #bbb;\n}\n\n.status-online {\n    background: #4ad991;\n    border-color: #4ad991;\n}\n\n.status-offline {\n    background: #e05252;\n    border-color: #e05252;\n}\n\n.driver-name {\n    font-weight: bold;\n    color: #2c2c4c;\n    margin-right: 1em;\n    font-size: 1.1em;\n    min-width: 120px;\n}\n\n.driver-actions {\n    margin-left: auto;\n    display: flex;\n    gap: 0.5em;\n}\n\n.driver-status-text {\n    margin-right: 2em;\n    font-size: 1em;\n    color: #555;\n}\n\n/* Login styles */\n.osl-login-bg {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #2196f3 0%, #21cbf3 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.osl-login-form {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.10);\n  padding: 36px 32px;\n  min-width: 320px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.osl-login-title {\n  font-size: 32px;\n  font-weight: 700;\n  color: #2196f3;\n  margin-bottom: 8px;\n  letter-spacing: 1px;\n}\n\n.osl-login-subtitle {\n  font-size: 16px;\n  color: #555;\n  margin-bottom: 24px;\n  letter-spacing: 1px;\n}\n\n.osl-login-error {\n  color: #e53935;\n  margin-bottom: 12px;\n}\n\n.osl-login-input {\n  margin-bottom: 12px;\n  padding: 10px 14px;\n  border-radius: 6px;\n  border: 1px solid #bbb;\n  width: 100%;\n  font-size: 16px;\n  box-sizing: border-box;\n  min-width: 220px;\n}\n\n.osl-login-input[type="text"],\n.osl-login-input[type="password"] {\n  width: 100%;\n  min-width: 220px;\n  box-sizing: border-box;\n  margin-bottom: 12px;\n  padding: 10px 14px;\n  border-radius: 6px;\n  border: 1px solid #bbb;\n  font-size: 16px;\n}\n\n.osl-login-btn {\n  background: #2196f3;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 0;\n  width: 100%;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  box-shadow: 0 2px 8px rgba(33,150,243,0.10);\n  transition: background 0.2s;\n}\n\n.osl-login-btn:disabled {\n  background: #90caf9;\n  cursor: not-allowed;\n}\n\n/* Top menu styles */\n.osl-topmenu {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 12px;\n  border-bottom: 1px solid #ddd;\n  background: #f7f7f7;\n  position: relative;\n}\n\n.osl-topmenu-title {\n  font-weight: bold;\n  font-size: 18px;\n  letter-spacing: 1px;\n  color: #222;\n}\n\n.osl-topmenu-operations {\n  position: relative;\n}\n\n.osl-topmenu-operations-btn {\n  background: none;\n  border: none;\n  font-weight: bold;\n  font-size: 16px;\n  color: #111;\n  cursor: pointer;\n  padding: 4px 12px;\n}\n\n.osl-topmenu-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: #fff;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n  z-index: 10;\n  min-width: 140px;\n}\n\n.osl-topmenu-dropdown-item {\n  padding: 8px 16px;\n  cursor: pointer;\n}\n\n.osl-topmenu-dropdown-item:hover {\n  background: #f0f0f0;\n}\n\n/* Editors bar on login */\n.osl-login-editors {\n  position: absolute;\n  top: 24px;\n  right: 36px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  z-index: 2;\n}\n\n.osl-login-editors-label {\n  font-weight: bold;\n  color: #222;\n  margin-right: 4px;\n}\n\n.osl-login-editors-link {\n  color: #1976d2;\n  text-decoration: underline;\n  font-weight: 500;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.osl-login-editors-link:hover {\n  color: #0d47a1;\n}',""]);const l=a},903:()=>{}},n=>{n.O(0,[644,231],()=>n(n.s=115)),n.O()}]);